# ç°¡åŒ–ç‰ˆè—¥å±€ç³»çµ±

## ç³»çµ±æ¦‚è¿°

é€™æ˜¯ä¸€å€‹ç°¡åŒ–ç‰ˆçš„è—¥å±€è‡ªå‹•åŒ–ç³»çµ±ï¼Œå°ˆæ³¨æ–¼æ ¸å¿ƒåŠŸèƒ½ï¼š

### ğŸ¯ æ ¸å¿ƒå·¥ä½œæµç¨‹

```
è¨‚å–®æ¥æ”¶ â†’ GroundedSAM2ç‰©å“æŒ‘é¸ â†’ æŠ“å–ç§»å‹• â†’ ç‰¹å®šä½ç½®LLMç¢ºèª â†’ å®Œæˆåˆ†ç™¼
```

### ğŸ”§ ä¸»è¦çµ„ä»¶

1. **GroundedSAM2**: ç”¨æ–¼ç‰©å“æŒ‘é¸å’Œè­˜åˆ¥
2. **å¢å¼·æŠ“å–ç³»çµ±**: é‡å°ç´°å°ç‰©ä»¶å„ªåŒ–çš„æŠ“å–
3. **LLMç¢ºèªç³»çµ±**: åœ¨ç‰¹å®šä½ç½®é€²è¡ŒäºŒæ¬¡ç¢ºèª
4. **ç¶²é ç•Œé¢**: ç¾æœ‰çš„é†«é™¢ç³»çµ±ç•Œé¢

## ä½¿ç”¨æ–¹æ³•

### å•Ÿå‹•ç³»çµ±

```bash
# åŸºæœ¬å•Ÿå‹•
ros2 launch tm_robot simple_pharmacy_system.launch.py

# æ¨¡æ“¬ç’°å¢ƒ
ros2 launch tm_robot simple_pharmacy_system.launch.py use_simulation:=true

# ä¸å•Ÿç”¨ç¶²é ç•Œé¢
ros2 launch tm_robot simple_pharmacy_system.launch.py enable_gui:=false
```

### ç™¼é€è¨‚å–®

```bash
ros2 topic pub /pharmacy/new_order std_msgs/String '{
  "data": "{
    \"order_id\": \"ORD001\",
    \"medicines\": [
      {\"name\": \"paracetamol\", \"quantity\": 1}
    ]
  }"
}'
```

### ç›£æ§ç‹€æ…‹

```bash
# æŸ¥çœ‹ç³»çµ±ç‹€æ…‹
ros2 topic echo /pharmacy/status

# æŸ¥çœ‹æ‰€æœ‰ç¯€é»
ros2 node list

# æŸ¥çœ‹æ‰€æœ‰æœå‹™
ros2 service list
```

## ç³»çµ±ç‰¹é»

### âœ… ä¿ç•™çš„æ ¸å¿ƒåŠŸèƒ½
- GroundedSAM2ç‰©å“è­˜åˆ¥
- å¢å¼·æŠ“å–æª¢æ¸¬
- ç¾æœ‰ç¶²é ç•Œé¢
- LLMç¢ºèªï¼ˆåƒ…åœ¨ç‰¹å®šä½ç½®ï¼‰

### âŒ ç§»é™¤çš„è¤‡é›œåŠŸèƒ½
- è¤‡é›œçš„å®‰å…¨èªè­‰ç³»çµ±
- è©³ç´°çš„å¯©è¨ˆæ—¥èªŒ
- æ€§èƒ½ç›£æ§ç³»çµ±
- è³‡æ–™åº«å‚™ä»½æ©Ÿåˆ¶
- è¤‡é›œçš„éŒ¯èª¤è™•ç†

## ç¶²é ç•Œé¢

ç³»çµ±æœƒè‡ªå‹•å•Ÿå‹•ç¾æœ‰çš„ç¶²é ç•Œé¢ï¼š
- **URL**: http://localhost:8000
- **åŠŸèƒ½**: è—¥ç‰©ç®¡ç†ã€è™•æ–¹ç®¡ç†ã€é†«å¸«ä»‹é¢

ç¾æœ‰é é¢ï¼š
- `Medicine.html` - è—¥ç‰©ç®¡ç†
- `Prescription.html` - è™•æ–¹ç®¡ç†  
- `doctor.html` - é†«å¸«ä»‹é¢
- `background.html` - èƒŒæ™¯é é¢

## æŠ€è¡“è¦æ±‚

### æœ€ä½ç³»çµ±è¦æ±‚
- Ubuntu 22.04 LTS
- ROS 2 Humble
- Python 3.8+
- 8GB RAM
- NVIDIA GPUï¼ˆç”¨æ–¼GroundedSAM2ï¼‰

### ä¾è³´å®‰è£
```bash
pip install opencv-python numpy scipy scikit-learn
pip install torch torchvision torchaudio
pip install fastapi uvicorn
```

## ç³»çµ±æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ç°¡åŒ–è—¥å±€ç³»çµ±                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ ç¶²é ç•Œé¢   â”‚    â”‚ è¨‚å–®è™•ç†  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚           â”‚              â”‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      ç°¡åŒ–è—¥å±€ç³»çµ±æ§åˆ¶å™¨              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚              â”‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ GroundedSAM2  â”‚  â”‚  å¢å¼·æŠ“å–æª¢æ¸¬    â”‚  â”‚
â”‚  â”‚  ç‰©å“æŒ‘é¸     â”‚  â”‚      ç³»çµ±       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      LLMç¢ºèªç³»çµ±ï¼ˆç‰¹å®šä½ç½®ï¼‰         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

1. **GroundedSAM2æœå‹™ç„¡æ³•å•Ÿå‹•**
   ```bash
   # æª¢æŸ¥æ¨¡å‹æ–‡ä»¶
   ls /workspace/Grounded-SAM-2/checkpoints/
   
   # æª¢æŸ¥GPU
   nvidia-smi
   ```

2. **ç¶²é ç•Œé¢ç„¡æ³•è¨ªå•**
   ```bash
   # æª¢æŸ¥ç«¯å£
   netstat -tulpn | grep 8000
   
   # æ‰‹å‹•å•Ÿå‹•
   cd /workspace/tm_robot/src/user_interface
   python3 -m uvicorn main:app --host 0.0.0.0 --port 8000
   ```

3. **ç›¸æ©Ÿé€£æ¥å•é¡Œ**
   ```bash
   # æª¢æŸ¥ç›¸æ©Ÿè¨­å‚™
   lsusb | grep Intel
   
   # æª¢æŸ¥RealSense
   rs-enumerate-devices
   ```

### æ—¥èªŒæŸ¥çœ‹

```bash
# ROSç¯€é»æ—¥èªŒ
ros2 log info

# ç³»çµ±æ—¥èªŒ
journalctl -f

# ç¶²é ç•Œé¢æ—¥èªŒ
# æŸ¥çœ‹çµ‚ç«¯è¼¸å‡º
```

## é–‹ç™¼èªªæ˜

### æª”æ¡ˆçµæ§‹
```
tm_robot/
â”œâ”€â”€ src/tm_robot_main/tm_robot_main/
â”‚   â”œâ”€â”€ simple_pharmacy_system.py      # ä¸»æ§åˆ¶ç³»çµ±
â”‚   â””â”€â”€ main_control.py                # æ©Ÿæ¢°æ‰‹è‡‚æ§åˆ¶
â”œâ”€â”€ src/user_interface/                # ç¶²é ç•Œé¢
â”‚   â”œâ”€â”€ main.py                        # FastAPIæ‡‰ç”¨
â”‚   â”œâ”€â”€ static/html/                   # HTMLæ¨¡æ¿
â”‚   â””â”€â”€ route/                         # APIè·¯ç”±
â”œâ”€â”€ src/graspnet/graspnet/             # æŠ“å–æª¢æ¸¬
â””â”€â”€ launch/
    â””â”€â”€ simple_pharmacy_system.launch.py  # å•Ÿå‹•è…³æœ¬
```

### è‡ªå®šç¾©ä¿®æ”¹

1. **ä¿®æ”¹è—¥ç‰©è­˜åˆ¥åƒæ•¸**
   ```python
   # åœ¨ simple_pharmacy_system.py ä¸­
   req.confidence_threshold = 0.3  # èª¿æ•´ç½®ä¿¡åº¦
   req.prompt = f"{medicine_name} medicine pill tablet"  # ä¿®æ”¹æç¤ºè©
   ```

2. **èª¿æ•´æŠ“å–åƒæ•¸**
   ```yaml
   # åœ¨ small_object_config.yaml ä¸­
   detection:
     min_area: 100
     max_area: 5000
   ```

3. **ä¿®æ”¹ç¶²é ç•Œé¢**
   ```python
   # åœ¨ user_interface/main.py ä¸­æ·»åŠ æ–°è·¯ç”±
   @app.get("/new_page.html")
   async def new_page(request: Request):
       return templates.TemplateResponse("new_page.html", {"request": request})
   ```

---

**ç‰ˆæœ¬**: ç°¡åŒ–ç‰ˆ 1.0  
**æ›´æ–°**: 2024å¹´12æœˆ  
**å…¼å®¹**: ROS 2 Humble, Ubuntu 22.04